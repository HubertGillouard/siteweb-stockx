{"ast":null,"code":"var _jsxFileName = \"/home/hubert/siteweb-stockx-main/sneakers-frontend/src/contexts/CartContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect } from \"react\";\nimport { getCart, addToCart as apiAddToCart, checkoutCart as apiCheckoutCart } from \"../api/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext();\nexport const CartProvider = ({\n  children\n}) => {\n  _s();\n  const [cart, setCart] = useState([]);\n  const token = localStorage.getItem(\"token\");\n  const refreshCart = async () => {\n    if (!token) return setCart([]);\n    try {\n      const res = await getCart(token);\n      setCart(res.data.items || []);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  const addToCart = async product => {\n    if (!token) return alert(\"Veuillez vous connecter\");\n    try {\n      await apiAddToCart(product.id, 1, token); // quantité = 1\n      refreshCart();\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  const checkoutCart = async () => {\n    if (!token) return alert(\"Veuillez vous connecter\");\n    try {\n      await apiCheckoutCart(token);\n      refreshCart();\n      alert(\"Commande passée ! ✅\");\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  useEffect(() => {\n    refreshCart();\n  }, [token]);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      addToCart,\n      checkoutCart,\n      refreshCart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n_s(CartProvider, \"5+HPoxSo1E/C3go3F1eDhM/DDhE=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","getCart","addToCart","apiAddToCart","checkoutCart","apiCheckoutCart","jsxDEV","_jsxDEV","CartContext","CartProvider","children","_s","cart","setCart","token","localStorage","getItem","refreshCart","res","data","items","err","console","error","product","alert","id","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/hubert/siteweb-stockx-main/sneakers-frontend/src/contexts/CartContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\nimport { getCart, addToCart as apiAddToCart, checkoutCart as apiCheckoutCart } from \"../api/api\";\n\nexport const CartContext = createContext();\n\nexport const CartProvider = ({ children }) => {\n  const [cart, setCart] = useState([]);\n  const token = localStorage.getItem(\"token\");\n\n  const refreshCart = async () => {\n    if (!token) return setCart([]);\n    try {\n      const res = await getCart(token);\n      setCart(res.data.items || []);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const addToCart = async (product) => {\n    if (!token) return alert(\"Veuillez vous connecter\");\n    try {\n      await apiAddToCart(product.id, 1, token); // quantité = 1\n      refreshCart();\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const checkoutCart = async () => {\n    if (!token) return alert(\"Veuillez vous connecter\");\n    try {\n      await apiCheckoutCart(token);\n      refreshCart();\n      alert(\"Commande passée ! ✅\");\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  useEffect(() => {\n    refreshCart();\n  }, [token]);\n\n  return (\n    <CartContext.Provider value={{ cart, addToCart, checkoutCart, refreshCart }}>\n      {children}\n    </CartContext.Provider>\n  );\n};\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AACjE,SAASC,OAAO,EAAEC,SAAS,IAAIC,YAAY,EAAEC,YAAY,IAAIC,eAAe,QAAQ,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjG,OAAO,MAAMC,WAAW,gBAAGV,aAAa,CAAC,CAAC;AAE1C,OAAO,MAAMW,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC5C,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAMe,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAE3C,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAI,CAACH,KAAK,EAAE,OAAOD,OAAO,CAAC,EAAE,CAAC;IAC9B,IAAI;MACF,MAAMK,GAAG,GAAG,MAAMjB,OAAO,CAACa,KAAK,CAAC;MAChCD,OAAO,CAACK,GAAG,CAACC,IAAI,CAACC,KAAK,IAAI,EAAE,CAAC;IAC/B,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IACpB;EACF,CAAC;EAED,MAAMnB,SAAS,GAAG,MAAOsB,OAAO,IAAK;IACnC,IAAI,CAACV,KAAK,EAAE,OAAOW,KAAK,CAAC,yBAAyB,CAAC;IACnD,IAAI;MACF,MAAMtB,YAAY,CAACqB,OAAO,CAACE,EAAE,EAAE,CAAC,EAAEZ,KAAK,CAAC,CAAC,CAAC;MAC1CG,WAAW,CAAC,CAAC;IACf,CAAC,CAAC,OAAOI,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IACpB;EACF,CAAC;EAED,MAAMjB,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI,CAACU,KAAK,EAAE,OAAOW,KAAK,CAAC,yBAAyB,CAAC;IACnD,IAAI;MACF,MAAMpB,eAAe,CAACS,KAAK,CAAC;MAC5BG,WAAW,CAAC,CAAC;MACbQ,KAAK,CAAC,qBAAqB,CAAC;IAC9B,CAAC,CAAC,OAAOJ,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IACpB;EACF,CAAC;EAEDrB,SAAS,CAAC,MAAM;IACdiB,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,CAACH,KAAK,CAAC,CAAC;EAEX,oBACEP,OAAA,CAACC,WAAW,CAACmB,QAAQ;IAACC,KAAK,EAAE;MAAEhB,IAAI;MAAEV,SAAS;MAAEE,YAAY;MAAEa;IAAY,CAAE;IAAAP,QAAA,EACzEA;EAAQ;IAAAmB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAACrB,EAAA,CA5CWF,YAAY;AAAAwB,EAAA,GAAZxB,YAAY;AAAA,IAAAwB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}