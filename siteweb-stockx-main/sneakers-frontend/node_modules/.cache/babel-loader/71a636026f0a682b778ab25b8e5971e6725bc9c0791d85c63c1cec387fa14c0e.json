{"ast":null,"code":"var _jsxFileName = \"/home/hubert/siteweb-stockx-main/sneakers-frontend/src/contexts/CartContext.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useMemo, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext();\nexport function CartProvider({\n  children\n}) {\n  _s();\n  const [cart, setCart] = useState([]);\n  const addToCart = (product, variant) => {\n    const key = `${product.id}-${(variant === null || variant === void 0 ? void 0 : variant.sku) || \"nosku\"}`;\n    const exists = cart.find(i => i.key === key);\n    if (exists) {\n      setCart(cart.map(i => i.key === key ? {\n        ...i,\n        qty: i.qty + 1\n      } : i));\n    } else {\n      var _variant$price;\n      setCart([...cart, {\n        key,\n        id: product.id,\n        name: product.name,\n        price: (_variant$price = variant === null || variant === void 0 ? void 0 : variant.price) !== null && _variant$price !== void 0 ? _variant$price : product.price,\n        qty: 1,\n        sku: variant === null || variant === void 0 ? void 0 : variant.sku,\n        size: variant === null || variant === void 0 ? void 0 : variant.size,\n        link: product.link\n      }]);\n    }\n  };\n  const removeFromCart = key => setCart(cart.filter(i => i.key !== key));\n  const clearCart = () => setCart([]);\n  const subtotal = useMemo(() => cart.reduce((s, i) => s + i.price * i.qty, 0), [cart]);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      addToCart,\n      removeFromCart,\n      clearCart,\n      subtotal\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 5\n  }, this);\n}\n_s(CartProvider, \"7ezAotEdJRvwnBek2m0Gezk52o8=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useMemo","useState","jsxDEV","_jsxDEV","CartContext","CartProvider","children","_s","cart","setCart","addToCart","product","variant","key","id","sku","exists","find","i","map","qty","_variant$price","name","price","size","link","removeFromCart","filter","clearCart","subtotal","reduce","s","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/hubert/siteweb-stockx-main/sneakers-frontend/src/contexts/CartContext.jsx"],"sourcesContent":["import React, { createContext, useMemo, useState } from \"react\";\n\nexport const CartContext = createContext();\n\nexport function CartProvider({ children }) {\n  const [cart, setCart] = useState([]);\n\n  const addToCart = (product, variant) => {\n    const key = `${product.id}-${variant?.sku || \"nosku\"}`;\n    const exists = cart.find(i => i.key === key);\n    if (exists) {\n      setCart(cart.map(i => i.key===key ? { ...i, qty: i.qty+1 } : i));\n    } else {\n      setCart([...cart, {\n        key, id: product.id, name: product.name, price: variant?.price ?? product.price,\n        qty: 1, sku: variant?.sku, size: variant?.size, link: product.link\n      }]);\n    }\n  };\n  const removeFromCart = (key) => setCart(cart.filter(i => i.key !== key));\n  const clearCart = () => setCart([]);\n  const subtotal = useMemo(()=> cart.reduce((s,i)=> s + i.price*i.qty, 0), [cart]);\n\n  return (\n    <CartContext.Provider value={{ cart, addToCart, removeFromCart, clearCart, subtotal }}>\n      {children}\n    </CartContext.Provider>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhE,OAAO,MAAMC,WAAW,gBAAGL,aAAa,CAAC,CAAC;AAE1C,OAAO,SAASM,YAAYA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACzC,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EAEpC,MAAMS,SAAS,GAAGA,CAACC,OAAO,EAAEC,OAAO,KAAK;IACtC,MAAMC,GAAG,GAAG,GAAGF,OAAO,CAACG,EAAE,IAAI,CAAAF,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEG,GAAG,KAAI,OAAO,EAAE;IACtD,MAAMC,MAAM,GAAGR,IAAI,CAACS,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACL,GAAG,KAAKA,GAAG,CAAC;IAC5C,IAAIG,MAAM,EAAE;MACVP,OAAO,CAACD,IAAI,CAACW,GAAG,CAACD,CAAC,IAAIA,CAAC,CAACL,GAAG,KAAGA,GAAG,GAAG;QAAE,GAAGK,CAAC;QAAEE,GAAG,EAAEF,CAAC,CAACE,GAAG,GAAC;MAAE,CAAC,GAAGF,CAAC,CAAC,CAAC;IAClE,CAAC,MAAM;MAAA,IAAAG,cAAA;MACLZ,OAAO,CAAC,CAAC,GAAGD,IAAI,EAAE;QAChBK,GAAG;QAAEC,EAAE,EAAEH,OAAO,CAACG,EAAE;QAAEQ,IAAI,EAAEX,OAAO,CAACW,IAAI;QAAEC,KAAK,GAAAF,cAAA,GAAET,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEW,KAAK,cAAAF,cAAA,cAAAA,cAAA,GAAIV,OAAO,CAACY,KAAK;QAC/EH,GAAG,EAAE,CAAC;QAAEL,GAAG,EAAEH,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEG,GAAG;QAAES,IAAI,EAAEZ,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEY,IAAI;QAAEC,IAAI,EAAEd,OAAO,CAACc;MAChE,CAAC,CAAC,CAAC;IACL;EACF,CAAC;EACD,MAAMC,cAAc,GAAIb,GAAG,IAAKJ,OAAO,CAACD,IAAI,CAACmB,MAAM,CAACT,CAAC,IAAIA,CAAC,CAACL,GAAG,KAAKA,GAAG,CAAC,CAAC;EACxE,MAAMe,SAAS,GAAGA,CAAA,KAAMnB,OAAO,CAAC,EAAE,CAAC;EACnC,MAAMoB,QAAQ,GAAG7B,OAAO,CAAC,MAAKQ,IAAI,CAACsB,MAAM,CAAC,CAACC,CAAC,EAACb,CAAC,KAAIa,CAAC,GAAGb,CAAC,CAACK,KAAK,GAACL,CAAC,CAACE,GAAG,EAAE,CAAC,CAAC,EAAE,CAACZ,IAAI,CAAC,CAAC;EAEhF,oBACEL,OAAA,CAACC,WAAW,CAAC4B,QAAQ;IAACC,KAAK,EAAE;MAAEzB,IAAI;MAAEE,SAAS;MAAEgB,cAAc;MAAEE,SAAS;MAAEC;IAAS,CAAE;IAAAvB,QAAA,EACnFA;EAAQ;IAAA4B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B;AAAC9B,EAAA,CAxBeF,YAAY;AAAAiC,EAAA,GAAZjC,YAAY;AAAA,IAAAiC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}