{"ast":null,"code":"const API_URL = process.env.REACT_APP_API_URL || \"http://localhost:4000/api\";\nconst checkoutCart = async () => {\n  try {\n    // 1️⃣ Paiement fictif\n    const paymentRes = await fetch(`${API_URL}/payments`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        amount: subtotal\n      })\n    });\n    if (!paymentRes.ok) throw new Error(\"Erreur paiement\");\n    const payment = await paymentRes.json();\n\n    // 2️⃣ Création commande\n    const orderRes = await fetch(`${API_URL}/orders`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        userId: 1,\n        items: cart,\n        paymentId: payment.id\n      })\n    });\n    if (!orderRes.ok) throw new Error(\"Erreur création commande\");\n    const orderData = await orderRes.json();\n    clearCart();\n    return orderData.order;\n  } catch (err) {\n    console.error(\"Erreur lors du checkout :\", err);\n    throw err;\n  }\n};","map":{"version":3,"names":["API_URL","process","env","REACT_APP_API_URL","checkoutCart","paymentRes","fetch","method","headers","body","JSON","stringify","amount","subtotal","ok","Error","payment","json","orderRes","userId","items","cart","paymentId","id","orderData","clearCart","order","err","console","error"],"sources":["/home/hubert/siteweb-stockx-main/sneakers-frontend/src/contexts/CartContext.js"],"sourcesContent":["const API_URL = process.env.REACT_APP_API_URL || \"http://localhost:4000/api\";\n\nconst checkoutCart = async () => {\n  try {\n    // 1️⃣ Paiement fictif\n    const paymentRes = await fetch(`${API_URL}/payments`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ amount: subtotal })\n    });\n    if (!paymentRes.ok) throw new Error(\"Erreur paiement\");\n    const payment = await paymentRes.json();\n\n    // 2️⃣ Création commande\n    const orderRes = await fetch(`${API_URL}/orders`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ userId: 1, items: cart, paymentId: payment.id })\n    });\n    if (!orderRes.ok) throw new Error(\"Erreur création commande\");\n    const orderData = await orderRes.json();\n\n    clearCart();\n    return orderData.order;\n  } catch (err) {\n    console.error(\"Erreur lors du checkout :\", err);\n    throw err;\n  }\n};\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B;AAE5E,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;EAC/B,IAAI;IACF;IACA,MAAMC,UAAU,GAAG,MAAMC,KAAK,CAAC,GAAGN,OAAO,WAAW,EAAE;MACpDO,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB,CAAC;MAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEC,MAAM,EAAEC;MAAS,CAAC;IAC3C,CAAC,CAAC;IACF,IAAI,CAACR,UAAU,CAACS,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,iBAAiB,CAAC;IACtD,MAAMC,OAAO,GAAG,MAAMX,UAAU,CAACY,IAAI,CAAC,CAAC;;IAEvC;IACA,MAAMC,QAAQ,GAAG,MAAMZ,KAAK,CAAC,GAAGN,OAAO,SAAS,EAAE;MAChDO,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB,CAAC;MAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEQ,MAAM,EAAE,CAAC;QAAEC,KAAK,EAAEC,IAAI;QAAEC,SAAS,EAAEN,OAAO,CAACO;MAAG,CAAC;IACxE,CAAC,CAAC;IACF,IAAI,CAACL,QAAQ,CAACJ,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,0BAA0B,CAAC;IAC7D,MAAMS,SAAS,GAAG,MAAMN,QAAQ,CAACD,IAAI,CAAC,CAAC;IAEvCQ,SAAS,CAAC,CAAC;IACX,OAAOD,SAAS,CAACE,KAAK;EACxB,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEF,GAAG,CAAC;IAC/C,MAAMA,GAAG;EACX;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}