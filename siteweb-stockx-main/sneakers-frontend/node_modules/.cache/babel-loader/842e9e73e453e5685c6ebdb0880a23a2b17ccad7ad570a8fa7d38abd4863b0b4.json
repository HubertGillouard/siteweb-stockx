{"ast":null,"code":"import axios from \"axios\";\n\n// Origin de l'API (configurable au build via Vite)\nexport const API_ORIGIN = import.meta.env.VITE_API_ORIGIN || \"http://localhost:5050\";\nconst baseURL = `${API_ORIGIN}/api`;\nexport const API = axios.create({\n  baseURL\n});\nexport function setToken(token) {\n  if (token) API.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;else delete API.defaults.headers.common[\"Authorization\"];\n}\n\n// Helpers images : si lien commence par /images/, on préfixe l'API\nexport function resolveImg(link) {\n  if (!link) return `${API_ORIGIN}/images/placeholder.jpg`;\n  if (link.startsWith(\"http\")) return link;\n  if (link.startsWith(\"/images/\")) return `${API_ORIGIN}${link}`;\n  return `${API_ORIGIN}/images/placeholder.jpg`;\n}\n\n// Produits\nexport const getProducts = (params = {}) => API.get(\"/products\", {\n  params\n});\nexport const getProduct = id => API.get(`/products/${id}`);\nexport const createProduct = data => API.post(\"/products\", data);\nexport const updateProduct = (id, data) => API.put(`/products/${id}`, data);\nexport const deleteProduct = id => API.delete(`/products/${id}`);\nexport const patchStock = (id, sku, delta) => API.patch(`/products/${id}/stock`, {\n  sku,\n  delta\n});\n\n// Auth\nexport const login = data => API.post(\"/auth/login\", data);\nexport const register = data => API.post(\"/auth/register\", data);\n\n// Commandes & paiements (fictifs)\nexport const createPayment = data => API.post(\"/payments\", data);\nexport const createOrder = data => API.post(\"/orders\", data);\nexport const listOrders = () => API.get(\"/orders\");\nexport const setOrderStatus = (id, status) => API.patch(`/orders/${id}/status`, {\n  status\n});\n\n// RGPD\nexport const getPrivacy = () => API.get(\"/privacy\");\nexport const gdprExport = () => API.post(\"/gdpr/export\");\nexport const gdprDelete = () => API.post(\"/gdpr/delete\");\nexport default API;","map":{"version":3,"names":["axios","API_ORIGIN","import","meta","env","VITE_API_ORIGIN","baseURL","API","create","setToken","token","defaults","headers","common","resolveImg","link","startsWith","getProducts","params","get","getProduct","id","createProduct","data","post","updateProduct","put","deleteProduct","delete","patchStock","sku","delta","patch","login","register","createPayment","createOrder","listOrders","setOrderStatus","status","getPrivacy","gdprExport","gdprDelete"],"sources":["/home/hubert/siteweb-stockx-main/sneakers-frontend/src/api/api.js"],"sourcesContent":["import axios from \"axios\";\n\n// Origin de l'API (configurable au build via Vite)\nexport const API_ORIGIN = import.meta.env.VITE_API_ORIGIN || \"http://localhost:5050\";\nconst baseURL = `${API_ORIGIN}/api`;\n\nexport const API = axios.create({ baseURL });\n\nexport function setToken(token) {\n  if (token) API.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n  else delete API.defaults.headers.common[\"Authorization\"];\n}\n\n// Helpers images : si lien commence par /images/, on préfixe l'API\nexport function resolveImg(link) {\n  if (!link) return `${API_ORIGIN}/images/placeholder.jpg`;\n  if (link.startsWith(\"http\")) return link;\n  if (link.startsWith(\"/images/\")) return `${API_ORIGIN}${link}`;\n  return `${API_ORIGIN}/images/placeholder.jpg`;\n}\n\n// Produits\nexport const getProducts    = (params={}) => API.get(\"/products\", { params });\nexport const getProduct     = (id)       => API.get(`/products/${id}`);\nexport const createProduct  = (data)     => API.post(\"/products\", data);\nexport const updateProduct  = (id,data)  => API.put(`/products/${id}`, data);\nexport const deleteProduct  = (id)       => API.delete(`/products/${id}`);\nexport const patchStock     = (id, sku, delta) => API.patch(`/products/${id}/stock`, { sku, delta });\n\n// Auth\nexport const login    = (data) => API.post(\"/auth/login\", data);\nexport const register = (data) => API.post(\"/auth/register\", data);\n\n// Commandes & paiements (fictifs)\nexport const createPayment = (data) => API.post(\"/payments\", data);\nexport const createOrder   = (data) => API.post(\"/orders\", data);\nexport const listOrders    = ()     => API.get(\"/orders\");\nexport const setOrderStatus= (id,status)=> API.patch(`/orders/${id}/status`, { status });\n\n// RGPD\nexport const getPrivacy    = () => API.get(\"/privacy\");\nexport const gdprExport    = () => API.post(\"/gdpr/export\");\nexport const gdprDelete    = () => API.post(\"/gdpr/delete\");\n\nexport default API;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}